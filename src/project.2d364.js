require=function e(t,i,n){function c(s,a){if(!i[s]){if(!t[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(o)return o(s,!0);var r=new Error("Cannot find module '"+s+"'");throw r.code="MODULE_NOT_FOUND",r}var h=i[s]={exports:{}};t[s][0].call(h.exports,function(e){var i=t[s][1][e];return c(i||e)},h,h.exports,e,t,i,n)}return i[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)c(n[s]);return c}({Game:[function(e,t,i){"use strict";cc._RF.push(t,"61a06PZw5JI8J6aON6JFmZt","Game"),cc.Class({extends:cc.Component,properties:{brickPrefab:{default:null,type:cc.Prefab},movePanel:cc.Node,overPanel:cc.Node,winPanel:cc.Node,initRow:5,initCol:4,maxRow:20,remove_list:[],brick_list:{default:[],type:cc.Node}},onLoad:function(){cc.find("Canvas").on(cc.Node.EventType.TOUCH_START,this.startTouch,this),this._startPosition=this.movePanel.position;for(var e=0;e<=this.maxRow;e++)for(var t=Math.floor(4*Math.random()),i=0;i<4;i++)if(i==t);else{this.brick_list.push(e+"#"+i);var n=null;(n=cc.instantiate(this.brickPrefab)).scaleX=1.3,n.scaleY=1.5,this.movePanel.addChild(n),n.name=e+"#"+i,n.position=cc.pMult(cc.v2(i+.22,e-e/1.8),175)}},addBrick:function(){this.maxRow=++this.maxRow;for(var e=Math.floor(4*Math.random()),t=0;t<4;t++)if(t==e);else{this.brick_list.push(this.maxRow+"#"+t);var i=null;(i=cc.instantiate(this.brickPrefab)).scaleX=1.3,i.scaleY=1.5,this.movePanel.addChild(i),i.name=this.maxRow+"#"+t,i.position=cc.pMult(cc.v2(t+.22,this.maxRow-this.maxRow/1.8),175)}},enableTouch:function(){cc.find("Canvas").on(cc.Node.EventType.TOUCH_START,this.startTouch,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},disableTouch:function(){cc.find("Canvas").targetOff(this),cc.systemEvent.targetOff(this)},move:function(){for(var e=this.movePanel.children.length,t=[],i=0;i<e;i++)t.push(this.movePanel.children[i].convertToWorldSpaceAR(this.movePanel.children[i].position).y);Math.min.apply(null,t);var n=cc.v2(this._startPosition.x,this._startPosition.y-40);this._startPosition.y=this._startPosition.y-40,this.movePanel.runAction(cc.moveTo(.25,n))},start:function(){this.schedule(this.moveCallBack,.25)},update:function(e){},moveCallBack:function(){this.move()},gameOverCallBack:function(){this.overPanel.active=!1,cc.director.loadScene("PVPGameScene")},createBrick:function(e,t){var i=null,n=[];this.remove_list=[],i=cc.instantiate(this.brickPrefab),this.movePanel.addChild(i);var c=this.movePanel.children.length,o=0;this.disableTouch();for(s=0;s<c;s++)this.movePanel.children[s].name.split("#")[1]==t&&n.push(this.movePanel.children[s].name.split("#")[0]);if(0==n.length){for(var s=0;s<c;s++)if(this.movePanel.children[s].name.split("#")[0]){o=this.movePanel.children[s].name.split("#")[0];break}}else o=Math.min.apply(null,n)-1;if(-1==this.movePanel.children.indexOf(o+"#"+t)){this.brick_list.push(o+"#"+t);var a=!0,l=[],r=[],h=[];i.name=o+"#"+t,i.position=i.convertToNodeSpaceAR(cc.v2(e,0)),i.scaleX=1.3,i.scaleY=1.5;var m=cc.moveTo(.25,cc.pMult(cc.v2(t+.22,o-o/1.8),175)),v=0,d=0,u=cc.callFunc(function(){for(i=0;i<c;i++)this.movePanel.children[i].name.split("#")[0]==o-1&&(d=++d),this.movePanel.children[i].name.split("#")[0]==o&&(v=++v);a=4==v&&0==d;for(i=0;i<c;i++)if(this.movePanel.children[i].name.split("#")[0]==o&&a&&(this.remove_list.push(this.movePanel.children[i].name),4==this.remove_list.length&&a)){console.log("remove"),this.disableTouch();for(var e=0;e<c;e++)for(var t=0;t<=this.remove_list.length;t++)this.movePanel.children[e].name==this.remove_list[t]&&this.movePanel.children[e].destroy();this.remove_list=[],this.enableTouch(),this.addBrick()}for(var i=0;i<c;i++){if(this.movePanel.children[i].name.split("#")[0]==o+3&&a&&(h.push(this.movePanel.children[i].name),4==h.length&&a)){this.disableTouch();for(n=0;n<c;n++)for(s=0;s<=h.length;s++)this.movePanel.children[n].name==h[s]&&this.movePanel.children[n].destroy();h=[],this.addBrick()}if(this.movePanel.children[i].name.split("#")[0]==o+2&&a&&(r.push(this.movePanel.children[i].name),4==r.length&&a)){this.disableTouch();for(n=0;n<c;n++)for(s=0;s<=r.length;s++)this.movePanel.children[n].name==r[s]&&this.movePanel.children[n].destroy();r=[],this.addBrick()}if(this.movePanel.children[i].name.split("#")[0]==o+1&&a&&(l.push(this.movePanel.children[i].name),4==l.length&&a)){this.disableTouch();for(var n=0;n<c;n++)for(var s=0;s<=l.length;s++)this.movePanel.children[n].name==l[s]&&this.movePanel.children[n].destroy();l=[],this.addBrick()}}this.enableTouch()},this);i.runAction(cc.sequence(m,u))}else console.log("重复添加")},startTouch:function(e){var t=e.getLocationX(),i=cc.pMult(cc.v2(.22,5-5/1.8),175).x,n=i,c=i+150,o=cc.pMult(cc.v2(1.22,5-5/1.8),175).x,s=o-30,a=o+150,l=cc.pMult(cc.v2(2.22,5-5/1.8),175).x,r=l-30,h=l+150,m=cc.pMult(cc.v2(3.22,5-5/1.8),175).x,v=m-30,d=m+150,u=0;t>n&&t<c?u=0:t>s&&t<a?u=1:t>r&&t<h?u=2:t>v&&t<d&&(u=3),this.createBrick(t,u)}}),cc._RF.pop()},{}],brick:[function(e,t,i){"use strict";cc._RF.push(t,"cc7fcJpEYFBCIAPhuDPQv1D","brick"),cc.Class({extends:cc.Component,properties:{_type:null,_mainScript:null},init:function(e,t){this._type=e,this._mainScript=t},start:function(){},playRemoveAnim:function(){cc.find("brick",this.node).getComponent(cc.Animation).play()}}),cc._RF.pop()},{}]},{},["Game","brick"]);